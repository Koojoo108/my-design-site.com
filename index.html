<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joseph Nyarko | Portfolio CMS</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Cinzel:wght@400;600&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                        display: ['Cinzel', 'serif'],
                    },
                    colors: {
                        primary: '#2563eb',
                        secondary: '#64748b',
                        accent: '#f59e0b',
                        dark: '#0f172a',
                        light: '#f8fafc'
                    }
                }
            }
        }
    </script>

    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .dark ::-webkit-scrollbar-track { background: #1e293b; }
        .dark ::-webkit-scrollbar-thumb { background: #475569; }

        .page-section {
            display: none;
            animation: fadeIn 0.4s ease-in-out;
        }
        .page-section.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        .dark .glass {
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .cert-aws {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 15px solid transparent;
            border-image: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%) 1;
        }
        .cert-google { background: white; }
        .cert-meta { background: #ffffff; border-top: 8px solid #0081fb; }

        @media print {
            nav, footer, .no-print { display: none !important; }
            #cv-content { display: block !important; padding: 0 !important; box-shadow: none !important; }
            body { background: white; color: black; }
        }

        /* Modal Animations */
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: all 0.3s ease-out; }
        .modal-exit { opacity: 1; transform: scale(1); }
        .modal-exit-active { opacity: 0; transform: scale(0.95); transition: all 0.2s ease-in; }

        /* Drag and Drop Zone */
        .drop-zone {
            border: 2px dashed #cbd5e1;
            transition: all 0.3s ease;
        }
        .drop-zone.dragover {
            border-color: #2563eb;
            background: rgba(37, 99, 235, 0.05);
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
        .animate-shake { animation: shake 0.4s ease-in-out; }

        /* Login Modal Specific Styles */
        #login-modal {
            transition: opacity 0.3s ease;
        }
        #login-modal.hidden {
            opacity: 0;
            pointer-events: none;
        }
        #login-modal:not(.hidden) {
            opacity: 1;
            pointer-events: auto;
        }
        #login-modal-content {
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        #login-modal.hidden #login-modal-content {
            transform: scale(0.95);
            opacity: 0;
        }
        #login-modal:not(.hidden) #login-modal-content {
            transform: scale(1);
            opacity: 1;
        }
    </style>
</head>
<body class="bg-light text-slate-800 dark:bg-dark dark:text-slate-100 transition-colors duration-300 font-sans antialiased">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass shadow-sm transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0 flex items-center cursor-pointer" onclick="router.navigate('home')">
                    <span class="font-display font-bold text-2xl bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-amber-500">
                        Portfolio.
                    </span>
                </div>

                <div class="hidden md:flex items-center space-x-8">
                    <a href="#" onclick="router.navigate('home')" class="nav-link text-sm font-medium hover:text-primary transition-colors">Home</a>
                    <a href="#" onclick="router.navigate('about')" class="nav-link text-sm font-medium hover:text-primary transition-colors">About</a>
                    <a href="#" onclick="router.navigate('projects')" class="nav-link text-sm font-medium hover:text-primary transition-colors">Projects</a>
                    <a href="#" onclick="router.navigate('certificates')" class="nav-link text-sm font-medium hover:text-primary transition-colors">Certificates</a>
                    <a href="#" onclick="router.navigate('cv')" class="nav-link text-sm font-medium hover:text-primary transition-colors">CV</a>
                    <a href="#" onclick="router.navigate('events')" class="nav-link text-sm font-medium hover:text-primary transition-colors">Events</a>
                    <a href="#" onclick="router.navigate('contact')" class="nav-link text-sm font-medium hover:text-primary transition-colors">Contact</a>
                    
                    <!-- Admin Button - Always visible, shows login modal if not authenticated -->
                    <button onclick="authManager.showLoginModal()" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors" title="Admin Access">
                        <i class="fas fa-shield-alt text-slate-600 dark:text-slate-300"></i>
                    </button>
                    
                    <div class="h-6 w-px bg-slate-300 dark:bg-slate-700 mx-2"></div>
                    <button onclick="themeManager.toggle()" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors">
                        <i id="theme-icon" class="fas fa-moon text-slate-600 dark:text-slate-300"></i>
                    </button>
                </div>

                <div class="md:hidden flex items-center gap-4">
                    <button onclick="themeManager.toggle()" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors">
                        <i id="theme-icon-mobile" class="fas fa-moon text-slate-600 dark:text-slate-300"></i>
                    </button>
                    <button onclick="ui.toggleMobileMenu()" class="p-2 rounded-md text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="mobile-menu" class="hidden md:hidden glass border-t border-slate-200 dark:border-slate-700">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#" onclick="router.navigate('home')" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-slate-200 dark:hover:bg-slate-700">Home</a>
                <a href="#" onclick="router.navigate('about')" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-slate-200 dark:hover:bg-slate-700">About</a>
                <a href="#" onclick="router.navigate('projects')" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-slate-200 dark:hover:bg-slate-700">Projects</a>
                <a href="#" onclick="router.navigate('certificates')" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-slate-200 dark:hover:bg-slate-700">Certificates</a>
                <a href="#" onclick="router.navigate('cv')" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-slate-200 dark:hover:bg-slate-700">CV</a>
                <a href="#" onclick="router.navigate('events')" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-slate-200 dark:hover:bg-slate-700">Events</a>
                <a href="#" onclick="router.navigate('contact')" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-slate-200 dark:hover:bg-slate-700">Contact</a>
                <a href="#" onclick="authManager.showLoginModal()" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-slate-200 dark:hover:bg-slate-700 text-blue-600">
                    <i class="fas fa-shield-alt mr-2"></i> Admin Access
                </a>
            </div>
        </div>
    </nav>

    <main class="pt-16 min-h-screen flex flex-col">
        
        <!-- HOME PAGE -->
        <section id="page-home" class="page-section active">
            <div class="relative overflow-hidden bg-gradient-to-br from-blue-50 to-white dark:from-slate-900 dark:to-slate-800 min-h-[90vh] flex items-center">
                <div class="absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
                <div class="absolute bottom-0 left-0 -ml-20 -mb-20 w-96 h-96 bg-amber-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>

                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full relative z-10">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                        <div class="order-2 lg:order-1">
                            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm font-semibold mb-6">
                                <span>ðŸ‘‹</span> Welcome to my portfolio
                            </div>
                            <h1 class="text-5xl md:text-7xl font-bold tracking-tight mb-6">
                                Hello, I'm <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-amber-500" id="hero-name">Joseph Nyarko</span>
                            </h1>
                            <p class="text-xl text-slate-600 dark:text-slate-300 mb-8 max-w-lg" id="hero-title">
                                Website Designer & Frontend Developer. Crafting digital experiences that combine beautiful design with powerful functionality.
                            </p>
                            
                            <div class="flex flex-wrap gap-4 mb-12">
                                <button onclick="router.navigate('projects')" class="px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-full font-semibold transition-all shadow-lg hover:shadow-blue-500/30 flex items-center gap-2">
                                    View My Work <i class="fas fa-arrow-right"></i>
                                </button>
                                <button onclick="router.navigate('contact')" class="px-8 py-3 border-2 border-slate-300 dark:border-slate-600 hover:border-blue-600 dark:hover:border-blue-500 rounded-full font-semibold transition-all">
                                    Get In Touch
                                </button>
                            </div>

                            <div class="grid grid-cols-3 gap-8 border-t border-slate-200 dark:border-slate-700 pt-8">
                                <div>
                                    <h3 class="text-3xl font-bold text-slate-900 dark:text-white counter" data-target="52" id="stat-projects">0</h3>
                                    <p class="text-sm text-slate-500">Projects Completed</p>
                                </div>
                                <div>
                                    <h3 class="text-3xl font-bold text-slate-900 dark:text-white counter" data-target="4" id="stat-experience">0</h3>
                                    <p class="text-sm text-slate-500">Years Experience</p>
                                </div>
                                <div>
                                    <h3 class="text-3xl font-bold text-slate-900 dark:text-white counter" data-target="30" id="stat-clients">0</h3>
                                    <p class="text-sm text-slate-500">Happy Clients</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="order-1 lg:order-2 flex justify-center">
                            <div class="relative w-72 h-72 md:w-96 md:h-96">
                                <div class="absolute inset-0 bg-gradient-to-tr from-blue-600 to-amber-500 rounded-full opacity-20 blur-2xl"></div>
                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600&h=600&fit=crop" 
                                     alt="Joseph Nyarko" 
                                     id="hero-image"
                                     class="relative w-full h-full object-cover rounded-full border-4 border-white dark:border-slate-800 shadow-2xl z-10">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ABOUT PAGE -->
        <section id="page-about" class="page-section py-12">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">About Me</h2>
                    <p class="text-slate-600 dark:text-slate-400 max-w-2xl mx-auto" id="about-subtitle">Passionate about creating impactful digital solutions.</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
                    <div class="lg:col-span-5">
                        <div class="sticky top-24">
                            <div class="relative rounded-2xl overflow-hidden shadow-2xl group">
                                <img src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800&h=1000&fit=crop" 
                                     alt="Working" 
                                     id="about-image"
                                     class="w-full h-auto transform transition-transform duration-500 group-hover:scale-105">
                            </div>
                        </div>
                    </div>

                    <div class="lg:col-span-7 space-y-8">
                        <div class="prose dark:prose-invert max-w-none">
                            <h3 class="text-2xl font-bold text-blue-600 dark:text-blue-400">My Story</h3>
                            <div id="about-content" class="text-lg text-slate-600 dark:text-slate-300 leading-relaxed space-y-4">
                                <!-- Content injected via JS -->
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="skills-container"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PROJECTS PAGE -->
        <section id="page-projects" class="page-section py-12 bg-slate-50 dark:bg-slate-900/50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Featured Projects</h2>
                    <p class="text-slate-600 dark:text-slate-400">A selection of my recent work and experiments.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="projects-container"></div>
            </div>
        </section>

        <!-- PROJECT DETAIL -->
        <section id="page-project-detail" class="page-section py-12">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <button onclick="router.back()" class="mb-8 flex items-center gap-2 text-slate-500 hover:text-blue-600 transition-colors">
                    <i class="fas fa-arrow-left"></i> Back to Projects
                </button>
                <div id="project-detail-content" class="bg-white dark:bg-slate-800 rounded-2xl shadow-xl overflow-hidden"></div>
            </div>
        </section>

        <!-- CERTIFICATES PAGE -->
        <section id="page-certificates" class="page-section py-12">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Certifications</h2>
                    <p class="text-slate-600 dark:text-slate-400">Professional credentials and continuous learning achievements.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8" id="certificates-container"></div>
            </div>
        </section>

        <!-- CV PAGE -->
        <section id="page-cv" class="page-section py-12 bg-slate-100 dark:bg-slate-900">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center mb-8 no-print">
                    <h2 class="text-3xl font-bold">Curriculum Vitae</h2>
                    <div class="flex gap-3">
                        <button onclick="cvManager.toggleView()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fas fa-eye mr-2"></i> <span id="cv-toggle-text">View CV</span>
                        </button>
                        <button onclick="cvManager.download()" class="px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors">
                            <i class="fas fa-download mr-2"></i> Download PDF
                        </button>
                    </div>
                </div>
                <div id="cv-document" class="hidden bg-white dark:bg-slate-800 p-8 md:p-12 shadow-2xl rounded-xl text-slate-900 dark:text-slate-100"></div>
            </div>
        </section>

        <!-- EVENTS PAGE -->
        <section id="page-events" class="page-section py-12">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Events & Talks</h2>
                    <p class="text-slate-600 dark:text-slate-400">Conferences, workshops, and meetups I've participated in.</p>
                </div>
                <div class="relative space-y-12 before:absolute before:inset-0 before:ml-5 before:-translate-x-px md:before:mx-auto md:before:translate-x-0 before:h-full before:w-0.5 before:bg-gradient-to-b before:from-transparent before:via-slate-300 before:to-transparent dark:before:via-slate-700" id="events-container"></div>
            </div>
        </section>

        <!-- CONTACT PAGE -->
        <section id="page-contact" class="page-section py-12 bg-slate-50 dark:bg-slate-900/50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Get In Touch</h2>
                    <p class="text-slate-600 dark:text-slate-400">Have a project in mind? Let's work together.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-5xl mx-auto">
                    <div class="space-y-8" id="contact-info">
                        <!-- Injected via JS -->
                    </div>
                    <form onsubmit="formHandler.handleSubmit(event)" class="bg-white dark:bg-slate-800 p-8 rounded-xl shadow-lg space-y-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">Full Name</label>
                            <input type="text" required class="w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all" placeholder="John Doe">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Email Address</label>
                            <input type="email" required class="w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all" placeholder="john@example.com">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Message</label>
                            <textarea rows="4" required class="w-full px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all" placeholder="Tell me about your project..."></textarea>
                        </div>
                        <button type="submit" class="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-all shadow-lg hover:shadow-blue-500/30">
                            Send Message
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- ADMIN DASHBOARD - Only visible after login -->
        <section id="page-admin" class="page-section">
            <div class="flex h-[calc(100vh-64px)] overflow-hidden bg-slate-100 dark:bg-slate-900">
                
                <!-- Admin Sidebar -->
                <aside class="w-64 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 hidden md:flex flex-col">
                    <div class="p-6 border-b border-slate-200 dark:border-slate-700">
                        <h2 class="text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2">
                            <i class="fas fa-shield-alt text-amber-500"></i> Admin
                        </h2>
                    </div>
                    <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
                        <a href="#" onclick="adminRouter.navigate('dashboard')" class="admin-nav-link active flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 font-medium">
                            <i class="fas fa-chart-line w-5"></i> Dashboard
                        </a>
                        <a href="#" onclick="adminRouter.navigate('projects')" class="admin-nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 font-medium transition-colors">
                            <i class="fas fa-briefcase w-5"></i> Projects
                        </a>
                        <a href="#" onclick="adminRouter.navigate('certificates')" class="admin-nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 font-medium transition-colors">
                            <i class="fas fa-certificate w-5"></i> Certificates
                        </a>
                        <a href="#" onclick="adminRouter.navigate('events')" class="admin-nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 font-medium transition-colors">
                            <i class="fas fa-calendar w-5"></i> Events
                        </a>
                        <a href="#" onclick="adminRouter.navigate('cv')" class="admin-nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 font-medium transition-colors">
                            <i class="fas fa-file-alt w-5"></i> CV / Profile
                        </a>
                        <a href="#" onclick="adminRouter.navigate('messages')" class="admin-nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 font-medium transition-colors">
                            <i class="fas fa-envelope w-5"></i> Messages
                            <span class="ml-auto bg-red-500 text-white text-xs px-2 py-0.5 rounded-full" id="msg-badge">0</span>
                        </a>
                        <a href="#" onclick="adminRouter.navigate('settings')" class="admin-nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50 font-medium transition-colors">
                            <i class="fas fa-cog w-5"></i> Settings
                        </a>
                    </nav>
                    <div class="p-4 border-t border-slate-200 dark:border-slate-700">
                        <button onclick="authManager.logout()" class="w-full flex items-center justify-center gap-2 px-4 py-2 text-sm text-slate-600 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400 transition-colors">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </aside>

                <!-- Admin Main Content -->
                <main class="flex-1 overflow-y-auto p-4 md:p-8 relative">
                    <div class="md:hidden flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold">Admin Panel</h2>
                        <button onclick="ui.toggleAdminSidebar()" class="p-2 bg-white dark:bg-slate-800 rounded-lg shadow">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>

                    <!-- Dashboard -->
                    <div id="admin-dashboard" class="admin-page space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                            <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-sm text-slate-500 dark:text-slate-400">Total Projects</p>
                                        <h3 class="text-2xl font-bold mt-1" id="admin-stat-projects">0</h3>
                                    </div>
                                    <div class="p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400">
                                        <i class="fas fa-briefcase"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-sm text-slate-500 dark:text-slate-400">Certificates</p>
                                        <h3 class="text-2xl font-bold mt-1" id="admin-stat-certs">0</h3>
                                    </div>
                                    <div class="p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg text-amber-600 dark:text-amber-400">
                                        <i class="fas fa-certificate"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-sm text-slate-500 dark:text-slate-400">Upcoming Events</p>
                                        <h3 class="text-2xl font-bold mt-1" id="admin-stat-events">0</h3>
                                    </div>
                                    <div class="p-2 bg-green-100 dark:bg-green-900/30 rounded-lg text-green-600 dark:text-green-400">
                                        <i class="fas fa-calendar"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-sm text-slate-500 dark:text-slate-400">Messages</p>
                                        <h3 class="text-2xl font-bold mt-1" id="admin-stat-messages">0</h3>
                                    </div>
                                    <div class="p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg text-purple-600 dark:text-purple-400">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700">
                                <h3 class="font-bold mb-4">Recent Activity</h3>
                                <div class="space-y-4" id="admin-activity-feed">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                            <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700">
                                <h3 class="font-bold mb-4">Quick Actions</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <button onclick="adminRouter.openProjectModal()" class="p-4 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all text-center">
                                        <i class="fas fa-plus text-2xl mb-2 text-blue-600"></i>
                                        <p class="text-sm font-medium">Add Project</p>
                                    </button>
                                    <button onclick="adminRouter.openCertModal()" class="p-4 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-all text-center">
                                        <i class="fas fa-certificate text-2xl mb-2 text-amber-600"></i>
                                        <p class="text-sm font-medium">Add Certificate</p>
                                    </button>
                                    <button onclick="adminRouter.openEventModal()" class="p-4 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-green-500 hover:bg-green-50 dark:hover:bg-green-900/20 transition-all text-center">
                                        <i class="fas fa-calendar-plus text-2xl mb-2 text-green-600"></i>
                                        <p class="text-sm font-medium">Add Event</p>
                                    </button>
                                    <button onclick="adminRouter.navigate('cv')" class="p-4 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-all text-center">
                                        <i class="fas fa-user-edit text-2xl mb-2 text-purple-600"></i>
                                        <p class="text-sm font-medium">Edit Profile</p>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Manage Projects -->
                    <div id="admin-projects" class="admin-page hidden space-y-6">
                        <div class="flex justify-between items-center">
                            <h3 class="font-bold text-xl">Manage Projects</h3>
                            <button onclick="adminRouter.openProjectModal()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2">
                                <i class="fas fa-plus"></i> Add New Project
                            </button>
                        </div>
                        <div class="bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden">
                            <div class="overflow-x-auto">
                                <table class="w-full text-left text-sm">
                                    <thead class="bg-slate-50 dark:bg-slate-700/50 text-slate-500 dark:text-slate-400">
                                        <tr>
                                            <th class="px-6 py-4 font-medium">Project</th>
                                            <th class="px-6 py-4 font-medium">Category</th>
                                            <th class="px-6 py-4 font-medium">Status</th>
                                            <th class="px-6 py-4 font-medium">Date</th>
                                            <th class="px-6 py-4 font-medium text-right">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-200 dark:divide-slate-700" id="admin-projects-table"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Manage Certificates -->
                    <div id="admin-certificates" class="admin-page hidden space-y-6">
                        <div class="flex justify-between items-center">
                            <h3 class="font-bold text-xl">Manage Certificates</h3>
                            <button onclick="adminRouter.openCertModal()" class="px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 flex items-center gap-2">
                                <i class="fas fa-plus"></i> Add Certificate
                            </button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="admin-certs-grid"></div>
                    </div>

                    <!-- Manage Events -->
                    <div id="admin-events" class="admin-page hidden space-y-6">
                        <div class="flex justify-between items-center">
                            <h3 class="font-bold text-xl">Manage Events</h3>
                            <button onclick="adminRouter.openEventModal()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2">
                                <i class="fas fa-plus"></i> Add Event
                            </button>
                        </div>
                        <div class="space-y-4" id="admin-events-list"></div>
                    </div>

                    <!-- CV / Profile Editor -->
                    <div id="admin-cv" class="admin-page hidden space-y-6">
                        <h3 class="font-bold text-xl mb-6">Edit Profile & CV</h3>
                        <form onsubmit="cmsManager.saveProfile(event)" class="max-w-4xl space-y-6 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Full Name</label>
                                    <input type="text" name="name" id="edit-name" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Professional Title</label>
                                    <input type="text" name="title" id="edit-title" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Email</label>
                                    <input type="email" name="email" id="edit-email" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Phone (Primary)</label>
                                    <input type="text" name="phone" id="edit-phone" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium mb-2">Location</label>
                                    <input type="text" name="location" id="edit-location" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                                </div>
                            </div>

                            <div class="border-t border-slate-200 dark:border-slate-700 pt-6">
                                <h4 class="font-bold mb-4">Media Settings</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Profile Photo URL</label>
                                        <input type="url" name="photo" id="edit-photo" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                                        <div class="mt-2 drop-zone p-4 rounded-lg text-center cursor-pointer" onclick="document.getElementById('photo-file').click()" ondrop="cmsManager.handleImageDrop(event, 'edit-photo')" ondragover="cmsManager.handleDragOver(event)" ondragleave="cmsManager.handleDragLeave(event)">
                                            <i class="fas fa-camera text-2xl text-slate-400 mb-1"></i>
                                            <p class="text-xs text-slate-500">Upload Profile Photo</p>
                                            <input type="file" id="photo-file" accept="image/*" class="hidden" onchange="cmsManager.handleImageSelect(event, 'edit-photo')">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">About Photo URL</label>
                                        <input type="url" name="aboutPhoto" id="edit-aboutPhoto" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                                        <div class="mt-2 drop-zone p-4 rounded-lg text-center cursor-pointer" onclick="document.getElementById('aboutPhoto-file').click()" ondrop="cmsManager.handleImageDrop(event, 'edit-aboutPhoto')" ondragover="cmsManager.handleDragOver(event)" ondragleave="cmsManager.handleDragLeave(event)">
                                            <i class="fas fa-image text-2xl text-slate-400 mb-1"></i>
                                            <p class="text-xs text-slate-500">Upload About Photo</p>
                                            <input type="file" id="aboutPhoto-file" accept="image/*" class="hidden" onchange="cmsManager.handleImageSelect(event, 'edit-aboutPhoto')">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="border-t border-slate-200 dark:border-slate-700 pt-6">
                                <h4 class="font-bold mb-4">Statistics</h4>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Projects Completed</label>
                                        <input type="number" name="projects" id="edit-stat-projects" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Years Experience</label>
                                        <input type="number" name="experience" id="edit-stat-experience" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Happy Clients</label>
                                        <input type="number" name="clients" id="edit-stat-clients" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                                    </div>
                                </div>
                            </div>

                            <div class="border-t border-slate-200 dark:border-slate-700 pt-6">
                                <h4 class="font-bold mb-4">About Content</h4>
                                <textarea name="about" id="edit-about" rows="6" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none" placeholder="Enter your bio..."></textarea>
                            </div>

                            <div class="flex gap-4 pt-4">
                                <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">Save Changes</button>
                                <button type="button" onclick="cmsManager.resetData()" class="px-6 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 font-medium">Reset to Default</button>
                            </div>
                        </form>
                    </div>

                    <!-- Messages -->
                    <div id="admin-messages" class="admin-page hidden space-y-6">
                        <h3 class="font-bold text-xl">Contact Messages</h3>
                        <div class="bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 divide-y divide-slate-200 dark:divide-slate-700" id="admin-messages-list"></div>
                    </div>

                    <!-- Settings -->
                    <div id="admin-settings" class="admin-page hidden space-y-6">
                        <div class="max-w-2xl bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-8">
                            <h3 class="font-bold text-xl mb-6">Site Settings</h3>
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Site Title</label>
                                    <input type="text" id="site-title" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Meta Description</label>
                                    <textarea id="site-desc" rows="3" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent"></textarea>
                                </div>
                                <div class="flex items-center justify-between py-4 border-t border-slate-200 dark:border-slate-700">
                                    <div>
                                        <h4 class="font-medium">Maintenance Mode</h4>
                                        <p class="text-sm text-slate-500">Show maintenance page to visitors</p>
                                    </div>
                                    <button onclick="this.querySelector('span').classList.toggle('translate-x-6'); this.classList.toggle('bg-blue-600'); this.classList.toggle('bg-slate-300')" class="w-12 h-6 rounded-full bg-slate-300 dark:bg-slate-600 relative transition-colors focus:outline-none">
                                        <span class="absolute left-1 top-1 w-4 h-4 rounded-full bg-white transition-transform"></span>
                                    </button>
                                </div>
                                <div class="pt-4 border-t border-slate-200 dark:border-slate-700">
                                    <button onclick="cmsManager.exportData()" class="w-full py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg text-sm font-medium mb-3">
                                        <i class="fas fa-download mr-2"></i> Export Data (JSON)
                                    </button>
                                    <label class="w-full py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg text-sm font-medium cursor-pointer flex items-center justify-center">
                                        <i class="fas fa-upload mr-2"></i> Import Data (JSON)
                                        <input type="file" accept=".json" onchange="cmsManager.importData(this)" class="hidden">
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                </main>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 py-8 mt-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-4">
            <p class="text-slate-500 dark:text-slate-400 text-sm">
                &copy; <span id="year"></span> <span id="footer-name">Joseph Nyarko</span>. All rights reserved.
            </p>
            <div class="flex space-x-6">
                <a href="https://www.pinterest.com/koojooenterprise/" target="_blank" class="text-slate-400 hover:text-red-500 transition-colors"><i class="fab fa-pinterest text-xl"></i></a>
                <a href="https://x.com/JOSEPHN15639728" target="_blank" class="text-slate-400 hover:text-black dark:hover:text-white transition-colors"><i class="fab fa-x-twitter text-xl"></i></a>
                <a href="#" class="text-slate-400 hover:text-blue-600 transition-colors"><i class="fab fa-linkedin text-xl"></i></a>
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-5 right-5 bg-slate-800 text-white px-6 py-3 rounded-lg shadow-xl transform translate-y-20 opacity-0 transition-all duration-300 z-50 flex items-center gap-3">
        <i class="fas fa-check-circle text-green-400"></i>
        <span id="toast-message">Operation successful</span>
    </div>

    <!-- Login Modal - Popup style, separate from main content -->
    <div id="login-modal" class="fixed inset-0 bg-black/60 z-[100] hidden flex items-center justify-center p-4 backdrop-blur-sm">
        <div id="login-modal-content" class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md p-8 border border-slate-200 dark:border-slate-700 relative">
            <!-- Close button -->
            <button onclick="authManager.closeLoginModal()" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors">
                <i class="fas fa-times text-xl"></i>
            </button>
            
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-lock text-2xl text-blue-600 dark:text-blue-400"></i>
                </div>
                <h2 class="text-2xl font-bold text-slate-900 dark:text-white">Admin Login</h2>
                <p class="text-slate-500 dark:text-slate-400 mt-2">Enter your credentials to access the dashboard</p>
            </div>
            
            <form onsubmit="authManager.handleLogin(event)" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium mb-2">Username / Email</label>
                    <div class="relative">
                        <i class="fas fa-envelope absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i>
                        <input type="email" id="login-email" required class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none transition-all" placeholder="admin@example.com">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Password</label>
                    <div class="relative">
                        <i class="fas fa-key absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i>
                        <input type="password" id="login-password" required class="w-full pl-10 pr-10 py-3 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none transition-all" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                        <button type="button" onclick="authManager.togglePassword()" class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200">
                            <i class="fas fa-eye" id="password-toggle-icon"></i>
                        </button>
                    </div>
                </div>
                <div id="login-error" class="hidden text-red-500 text-sm font-medium text-center bg-red-50 dark:bg-red-900/20 p-2 rounded">
                    Invalid credentials. Please try again.
                </div>
                <button type="submit" class="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-all shadow-lg hover:shadow-blue-500/30 flex items-center justify-center gap-2">
                    <span>Login to Dashboard</span>
                    <i class="fas fa-sign-in-alt"></i>
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-xs text-slate-400">Press ESC to close</p>
            </div>
        </div>
    </div>

    <!-- Certificate Modal -->
    <div id="cert-modal" class="fixed inset-0 bg-black/90 z-[60] hidden flex items-center justify-center p-4 opacity-0 transition-opacity duration-300">
        <button onclick="certViewer.close()" class="absolute top-4 right-4 text-white text-4xl hover:text-slate-300">&times;</button>
        <div id="cert-content" class="max-w-4xl w-full transform scale-95 transition-transform duration-300"></div>
    </div>

    <!-- Admin Modals -->
    <!-- Project Modal -->
    <div id="modal-project" class="fixed inset-0 bg-black/50 z-[70] hidden flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto transform scale-95 opacity-0 transition-all duration-300" id="modal-project-content">
            <div class="p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                <h3 class="text-xl font-bold" id="project-modal-title">Add New Project</h3>
                <button onclick="adminRouter.closeModals()" class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form onsubmit="cmsManager.saveProject(event)" class="p-6 space-y-4">
                <input type="hidden" id="project-id">
                <div>
                    <label class="block text-sm font-medium mb-2">Project Title *</label>
                    <input type="text" id="project-title" required class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Category</label>
                        <select id="project-category" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                            <option>Web App</option>
                            <option>Mobile App</option>
                            <option>UI/UX Design</option>
                            <option>E-Commerce</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Status</label>
                        <select id="project-status" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                            <option value="Live">Live</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Prototype">Prototype</option>
                            <option value="Archived">Archived</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Short Description *</label>
                    <input type="text" id="project-short" required class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none" placeholder="Brief summary for cards...">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Full Description *</label>
                    <textarea id="project-full" rows="3" required class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Image URL</label>
                    <input type="url" id="project-image" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none" placeholder="https://...">
                    <p class="text-xs text-slate-500 mt-1">Or use image upload below (converts to base64)</p>
                </div>
                <div class="drop-zone p-4 rounded-lg text-center cursor-pointer" onclick="document.getElementById('project-file').click()" ondrop="cmsManager.handleImageDrop(event, 'project-image')" ondragover="cmsManager.handleDragOver(event)" ondragleave="cmsManager.handleDragLeave(event)">
                    <i class="fas fa-cloud-upload-alt text-3xl text-slate-400 mb-2"></i>
                    <p class="text-sm text-slate-600 dark:text-slate-400">Drop image here or click to upload</p>
                    <input type="file" id="project-file" accept="image/*" class="hidden" onchange="cmsManager.handleImageSelect(event, 'project-image')">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Tags (comma separated)</label>
                    <input type="text" id="project-tags" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none" placeholder="React, Node.js, MongoDB">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Demo URL</label>
                        <input type="url" id="project-demo" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none" placeholder="https://...">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Repository URL</label>
                        <input type="url" id="project-repo" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none" placeholder="https://github.com/...">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Features (one per line)</label>
                    <textarea id="project-features" rows="3" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none" placeholder="Feature 1&#10;Feature 2&#10;Feature 3"></textarea>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Date</label>
                        <input type="text" id="project-date" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none" placeholder="Jan 2024">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Client</label>
                        <input type="text" id="project-client" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="submit" class="flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">Save Project</button>
                    <button type="button" onclick="adminRouter.closeModals()" class="px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Certificate Modal -->
    <div id="modal-certificate" class="fixed inset-0 bg-black/50 z-[70] hidden flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto transform scale-95 opacity-0 transition-all duration-300" id="modal-cert-content">
            <div class="p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                <h3 class="text-xl font-bold" id="cert-modal-title">Add Certificate</h3>
                <button onclick="adminRouter.closeModals()" class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form onsubmit="cmsManager.saveCertificate(event)" class="p-6 space-y-4">
                <input type="hidden" id="cert-id">
                <div>
                    <label class="block text-sm font-medium mb-2">Certificate Title *</label>
                    <input type="text" id="cert-title" required class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-amber-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Issuer *</label>
                    <input type="text" id="cert-issuer" required class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-amber-500 outline-none" placeholder="e.g., Google, AWS, Meta">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Type</label>
                        <select id="cert-type" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-amber-500 outline-none">
                            <option value="aws">AWS Style</option>
                            <option value="google">Google Style</option>
                            <option value="meta">Meta Style</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Date</label>
                        <input type="text" id="cert-date" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-amber-500 outline-none" placeholder="Dec 2023">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Description</label>
                    <textarea id="cert-desc" rows="2" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-amber-500 outline-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Icon (Emoji or text)</label>
                    <input type="text" id="cert-icon" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-amber-500 outline-none" placeholder="ðŸ† or ðŸŽ“">
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="submit" class="flex-1 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 font-medium">Save Certificate</button>
                    <button type="button" onclick="adminRouter.closeModals()" class="px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Event Modal -->
    <div id="modal-event" class="fixed inset-0 bg-black/50 z-[70] hidden flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto transform scale-95 opacity-0 transition-all duration-300" id="modal-event-content">
            <div class="p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                <h3 class="text-xl font-bold" id="event-modal-title">Add Event</h3>
                <button onclick="adminRouter.closeModals()" class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-300">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form onsubmit="cmsManager.saveEvent(event)" class="p-6 space-y-4">
                <input type="hidden" id="event-id">
                <div>
                    <label class="block text-sm font-medium mb-2">Event Title *</label>
                    <input type="text" id="event-title" required class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-green-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Description</label>
                    <input type="text" id="event-desc" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-green-500 outline-none" placeholder="e.g., Speaking about React Patterns">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Date *</label>
                        <input type="text" id="event-date" required class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-green-500 outline-none" placeholder="June 15, 2024">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Location</label>
                        <input type="text" id="event-location" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-green-500 outline-none" placeholder="New York, USA">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Status</label>
                    <select id="event-status" class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-transparent focus:ring-2 focus:ring-green-500 outline-none">
                        <option value="upcoming">Upcoming</option>
                        <option value="past">Past</option>
                    </select>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="submit" class="flex-1 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium">Save Event</button>
                    <button type="button" onclick="adminRouter.closeModals()" class="px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="modal-delete" class="fixed inset-0 bg-black/50 z-[80] hidden flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md p-6 transform scale-95 opacity-0 transition-all duration-300" id="modal-delete-content">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-exclamation-triangle text-2xl text-red-600"></i>
                </div>
                <h3 class="text-xl font-bold mb-2">Confirm Deletion</h3>
                <p class="text-slate-600 dark:text-slate-400">Are you sure you want to delete this item? This action cannot be undone.</p>
            </div>
            <div class="flex gap-3">
                <button onclick="cmsManager.confirmDelete()" class="flex-1 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium">Delete</button>
                <button onclick="adminRouter.closeModals()" class="flex-1 py-2 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // ================= DATA STORE WITH LOCALSTORAGE =================
        const defaultData = {
            personal: {
                name: "Joseph Nyarko",
                title: "Website Designer & Frontend Developer",
                email: "nyarkojosephnsonamoah018@gmail.com",
                phone: ["0203486016", "0554411907"],
                location: "Agogo, Dollar Days Inn, Asante Akyem, Ghana",
                dob: "10th April, 2000",
                gender: "Male",
                maritalStatus: "Single (Never Married)",
                languages: "English, Twi",
                photo: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600&h=600&fit=crop",
                aboutPhoto: "https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800&h=1000&fit=crop",
                about: "Highly creative and detail-oriented Website Designer with over 4 years of experience, specializing in bridging the gap between complex backend functionality and intuitive frontend aesthetics. Dedicated to crafting Progressive Web Apps (PWAs) and responsive platforms that meet current accessibility standards (WCAG) while driving measurable business growth through improved conversion rates and user retention.\n\nI aim to join forward-thinking creative teams where I can apply my proficiency in Figma, Adobe Creative Suite, and advanced CSS/HTML frameworks to create dynamic, motion-aware interfaces that tell a brand's story while maintaining lightning-fast performance."
            },
            stats: { projects: 52, experience: 4, clients: 30 },
            education: [
                { school: "Juaben Senior High School", qualification: "WASSCE" },
                { school: "Camp 15 D/A JSH", qualification: "BECE" }
            ],
            workHistory: [
                {
                    role: "Senior Web & UI Designer",
                    company: "Nexus Digital Solutions",
                    period: "January 2023 - Present",
                    overview: "Lead designer for a full-service digital agency, overseeing the visual direction of 20+ concurrent projects for Mid-Market and Enterprise clients.",
                    responsibilities: [
                        "End-to-End Design Systems: Developed and maintained comprehensive design systems and UI kits in Figma.",
                        "High-Conversion Landing Pages: Designed and optimized landing pages resulting in an average 22% increase in conversion rates.",
                        "Stakeholder Collaboration: Facilitated design discovery workshops to translate business goals into functional wireframes.",
                        "Developer Handoff: Provided clean CSS documentation and technical oversight during the build phase.",
                        "Mentorship: Conducted weekly design reviews for junior staff on typography, color theory, and accessibility."
                    ]
                },
                {
                    role: "UX/UI Specialist",
                    company: "CloudStream SaaS Platforms",
                    period: "June 2020 - December 2022",
                    overview: "In-house designer focused on improving the user journey and interface of a high-traffic cloud software platform.",
                    responsibilities: [
                        "User Research & Journey Mapping: Reduced user churn by 15% through identifying friction points in onboarding.",
                        "Interactive Prototyping: Created complex prototypes using Adobe XD and Protopie for micro-interactions.",
                        "Responsive Redesign: Led 'Mobile-First' initiative ensuring 100% functionality on handheld devices.",
                        "Iconography & Asset Creation: Custom-designed a library of 150+ vector icons and illustrations.",
                        "Agile Collaboration: Worked within an Agile/Scrum environment with daily stand-ups and two-week sprints."
                    ]
                },
                {
                    role: "Junior Web Designer",
                    company: "BrightSpark Creative Agency",
                    period: "May 2020 - May 2023",
                    overview: "Supporting the senior creative team in the production of high-quality websites for local small businesses and non-profits.",
                    responsibilities: [
                        "Visual Asset Production: Edited and optimized high-resolution imagery for fast load times.",
                        "CMS Customization: Built and styled custom themes using WordPress and Elementor.",
                        "Basic Frontend Implementation: Assisted in development of components using HTML5 and CSS3.",
                        "Quality Assurance (QA): Performed rigorous cross-browser testing to fix layout bugs.",
                        "Client Training: Produced 'User Manual' documentation and conducted training sessions."
                    ]
                }
            ],
            skills: [
                { icon: "âš¡", title: "Frontend Development", desc: "React, Vue.js, TypeScript, Tailwind CSS, HTML5, CSS3", color: "blue" },
                { icon: "ðŸŽ¨", title: "UI/UX Design", desc: "Figma, Adobe Creative Suite, Adobe XD, Protopie", color: "purple" },
                { icon: "âš™ï¸", title: "CMS & Platforms", desc: "WordPress, Elementor, Progressive Web Apps (PWAs)", color: "indigo" },
                { icon: "ðŸš€", title: "Process & QA", desc: "Agile/Scrum, User Research, Accessibility (WCAG), Cross-browser Testing", color: "amber" }
            ],
            projects: [
                {
                    id: 1,
                    title: "BrewTrack - Coffee Subscription PWA",
                    shortDesc: "High-performance, installable web application for a specialty coffee roastery.",
                    fullDesc: "Architected a Progressive Web App that allows users to manage subscriptions offline using Service Workers. Designed a 'Mobile-First' UI in Figma focusing on high-speed navigation and custom caching strategies.",
                    image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=500&fit=crop",
                    tags: ["PWA", "Figma", "Service Workers", "Mobile-First"],
                    features: ["Offline functionality", "Web App Manifest", "Custom caching strategy", "98/100 Lighthouse score"],
                    date: "Dec 2023",
                    client: "BrewTrack Roastery",
                    status: "Live",
                    category: "Web App",
                    demoUrl: "https://brewtrack-demo.example.com",
                    repoUrl: "https://github.com/joseph/brewtrack"
                },
                {
                    id: 2,
                    title: "Artisan Hub - Creative Portfolio CMS",
                    shortDesc: "Minimalist, highly visual CMS-driven website for independent artists.",
                    fullDesc: "Created a custom-themed site using WordPress and Elementor, optimized for image-heavy content. Implemented a custom Lazy-Loading system and 'Dark Mode' aesthetic for high-res artwork.",
                    image: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&h=500&fit=crop",
                    tags: ["WordPress", "Elementor", "Lazy-Loading", "UI Design"],
                    features: ["Dark Mode aesthetic", "4K image optimization", "Custom Lazy-Loading", "Thumb-reach UX optimization"],
                    date: "Oct 2023",
                    client: "Independent Artists Collective",
                    status: "Live",
                    category: "CMS",
                    demoUrl: "https://artisan-hub.example.com",
                    repoUrl: "https://github.com/joseph/artisan-hub"
                },
                {
                    id: 3,
                    title: "FinSync - Personal Finance Dashboard",
                    shortDesc: "Conceptual redesign of a complex financial dashboard to be human-friendly.",
                    fullDesc: "UI/UX Case Study focusing on reducing information overload. Used Glassmorphism and color theory to highlight important data, with interactive SVG charts and a comprehensive design system.",
                    image: "https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=800&h=500&fit=crop",
                    tags: ["UI/UX Case Study", "Glassmorphism", "Data Visualization", "SVG Animation"],
                    features: ["User Journey Mapping", "Interactive SVG charts", "Comprehensive Design System", "Glassmorphism UI"],
                    date: "Aug 2023",
                    client: "Internal Case Study",
                    status: "Prototype",
                    category: "UI/UX Design",
                    demoUrl: "https://finsync-prototype.example.com",
                    repoUrl: "https://github.com/joseph/finsync"
                }
            ],
            certificates: [
                { id: "aws-1", type: "aws", icon: "ðŸ†", title: "AWS Solutions Architect", issuer: "Amazon Web Services", date: "Dec 2023", desc: "Designing distributed systems on AWS." },
                { id: "google-1", type: "google", icon: "ðŸŽ“", title: "Google UX Design", issuer: "Google", date: "Aug 2023", desc: "UX research, wireframing, and prototyping." },
                { id: "meta-1", type: "meta", icon: "âš›ï¸", title: "Meta Frontend Developer", issuer: "Meta", date: "Mar 2023", desc: "Advanced React patterns and state management." }
            ],
            events: [
                { id: 1, title: "React Summit 2026", desc: "Speaking about 'Advanced React Patterns'", date: "June 15, 2024", location: "New York, USA", status: "upcoming" },
                { id: 2, title: "Tech Conference 2024", desc: "Workshop: 'Building Accessible Web Apps'", date: "Feb 20, 2024", location: "London, UK", status: "past" },
                { id: 3, title: "JS Meetup SF", desc: "Talk: 'Modern JavaScript Performance'", date: "Jan 10, 2024", location: "San Francisco, USA", status: "past" }
            ],
            messages: [],
            settings: {
                siteTitle: "Joseph Nyarko | Portfolio",
                siteDescription: "Professional Portfolio - Showcasing projects, certificates, and experience"
            }
        };

        const store = {
            data: null,
            
            init() {
                const saved = localStorage.getItem('portfolio_cms_data');
                if (saved) {
                    this.data = JSON.parse(saved);
                    // Merge with defaults to ensure new fields exist
                    this.data.personal = { ...defaultData.personal, ...this.data.personal };
                    this.data.stats = { ...defaultData.stats, ...this.data.stats };
                    this.data.settings = { ...defaultData.settings, ...this.data.settings };
                } else {
                    this.data = JSON.parse(JSON.stringify(defaultData));
                    this.save();
                }
            },
            
            save() {
                localStorage.setItem('portfolio_cms_data', JSON.stringify(this.data));
            },
            
            reset() {
                this.data = JSON.parse(JSON.stringify(defaultData));
                this.save();
                return this.data;
            },
            
            export() {
                return JSON.stringify(this.data, null, 2);
            },
            
            import(jsonStr) {
                try {
                    const data = JSON.parse(jsonStr);
                    this.data = { ...defaultData, ...data };
                    this.save();
                    return true;
                } catch (e) {
                    return false;
                }
            }
        };

        // ================= AUTH MANAGER =================
        const authManager = {
            isAuthenticated: false,
            
            init() {
                this.isAuthenticated = sessionStorage.getItem('portfolio_auth') === 'true';
            },
            
            showLoginModal() {
                // If already authenticated, go directly to admin dashboard
                if (this.isAuthenticated) {
                    router.navigate('admin');
                    return;
                }
                
                const modal = document.getElementById('login-modal');
                modal.classList.remove('hidden');
                // Focus on email input
                setTimeout(() => document.getElementById('login-email').focus(), 100);
            },
            
            closeLoginModal() {
                const modal = document.getElementById('login-modal');
                modal.classList.add('hidden');
                // Clear error message
                document.getElementById('login-error').classList.add('hidden');
                // Clear form
                document.getElementById('login-email').value = '';
                document.getElementById('login-password').value = '';
            },
            
            handleLogin(e) {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                const errorEl = document.getElementById('login-error');
                
                // Credentials from user request
                const validEmail = 'nyarkojosephnsonamoah018@gmail.com';
                const validPass = 'Off0241800448$';
                
                if (email === validEmail && password === validPass) {
                    this.isAuthenticated = true;
                    sessionStorage.setItem('portfolio_auth', 'true');
                    errorEl.classList.add('hidden');
                    
                    // Close modal first
                    this.closeLoginModal();
                    
                    ui.showToast('Login successful!');
                    
                    // Navigate to admin dashboard after a short delay
                    setTimeout(() => {
                        router.navigate('admin');
                    }, 300);
                } else {
                    errorEl.classList.remove('hidden');
                    // Shake effect on form
                    const form = e.target;
                    form.classList.add('animate-shake');
                    setTimeout(() => form.classList.remove('animate-shake'), 400);
                }
            },
            
            logout() {
                this.isAuthenticated = false;
                sessionStorage.removeItem('portfolio_auth');
                ui.showToast('Logged out successfully');
                router.navigate('home');
            },
            
            togglePassword() {
                const passInput = document.getElementById('login-password');
                const icon = document.getElementById('password-toggle-icon');
                if (passInput.type === 'password') {
                    passInput.type = 'text';
                    icon.classList.replace('fa-eye', 'fa-eye-slash');
                } else {
                    passInput.type = 'password';
                    icon.classList.replace('fa-eye-slash', 'fa-eye');
                }
            }
        };

        // ================= ROUTER =================
        const router = {
            currentPage: 'home',
            history: [],
            
            navigate(pageId) {
                // Check authentication for admin page
                if (pageId === 'admin' && !authManager.isAuthenticated) {
                    // Show login modal instead of navigating
                    authManager.showLoginModal();
                    return;
                }

                document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active'));
                const target = document.getElementById(`page-${pageId}`);
                if (target) {
                    target.classList.add('active');
                    this.history.push(this.currentPage);
                    this.currentPage = pageId;
                    window.scrollTo(0, 0);
                    
                    if(pageId === 'home') setTimeout(() => this.animateCounters(), 100);
                    if(pageId === 'about') renderer.renderAbout();
                    if(pageId === 'projects') renderer.renderProjects();
                    if(pageId === 'certificates') renderer.renderCertificates();
                    if(pageId === 'cv') renderer.renderCV();
                    if(pageId === 'events') renderer.renderEvents();
                    if(pageId === 'contact') renderer.renderContact();
                    if(pageId === 'admin') adminRouter.navigate('dashboard');
                }
                document.getElementById('mobile-menu').classList.add('hidden');
            },
            
            back() {
                if (this.history.length > 0) {
                    const prev = this.history.pop();
                    this.navigate(prev);
                } else {
                    this.navigate('projects');
                }
            },
            
            animateCounters() {
                const stats = store.data.stats;
                const counters = [
                    { el: document.getElementById('stat-projects'), val: stats.projects },
                    { el: document.getElementById('stat-experience'), val: stats.experience },
                    { el: document.getElementById('stat-clients'), val: stats.clients }
                ];
                
                counters.forEach(({el, val}) => {
                    if(!el) return;
                    const duration = 2000;
                    const increment = val / (duration / 16);
                    let current = 0;
                    const timer = setInterval(() => {
                        current += increment;
                        if (current >= val) {
                            el.innerText = val + '+';
                            clearInterval(timer);
                        } else {
                            el.innerText = Math.floor(current);
                        }
                    }, 16);
                });
            }
        };

        // ================= ADMIN ROUTER =================
        const adminRouter = {
            currentTab: 'dashboard',
            deleteCallback: null,
            
            navigate(tabId) {
                document.querySelectorAll('.admin-page').forEach(el => el.classList.add('hidden'));
                document.getElementById(`admin-${tabId}`).classList.remove('hidden');
                
                document.querySelectorAll('.admin-nav-link').forEach(link => {
                    link.classList.remove('bg-blue-50', 'dark:bg-blue-900/20', 'text-blue-600', 'dark:text-blue-400');
                    link.classList.add('text-slate-600', 'dark:text-slate-400');
                });
                
                if(event && event.currentTarget) {
                    event.currentTarget.classList.remove('text-slate-600', 'dark:text-slate-400');
                    event.currentTarget.classList.add('bg-blue-50', 'dark:bg-blue-900/20', 'text-blue-600', 'dark:text-blue-400');
                } else {
                    // Set active based on tabId
                    const links = document.querySelectorAll('.admin-nav-link');
                    const index = ['dashboard', 'projects', 'certificates', 'events', 'cv', 'messages', 'settings'].indexOf(tabId);
                    if(links[index]) {
                        links[index].classList.remove('text-slate-600', 'dark:text-slate-400');
                        links[index].classList.add('bg-blue-50', 'dark:bg-blue-900/20', 'text-blue-600', 'dark:text-blue-400');
                    }
                }
                
                this.currentTab = tabId;
                
                if(tabId === 'dashboard') this.loadDashboard();
                if(tabId === 'projects') this.loadProjects();
                if(tabId === 'certificates') this.loadCertificates();
                if(tabId === 'events') this.loadEvents();
                if(tabId === 'cv') this.loadCVEditor();
                if(tabId === 'messages') this.loadMessages();
            },
            
            loadDashboard() {
                document.getElementById('admin-stat-projects').innerText = store.data.projects.length;
                document.getElementById('admin-stat-certs').innerText = store.data.certificates.length;
                document.getElementById('admin-stat-events').innerText = store.data.events.filter(e => e.status === 'upcoming').length;
                document.getElementById('admin-stat-messages').innerText = store.data.messages.length;
                
                // Activity feed
                const feed = document.getElementById('admin-activity-feed');
                const recent = [
                    ...store.data.projects.slice(-2).map(p => ({ type: 'project', title: p.title, date: p.date })),
                    ...store.data.certificates.slice(-2).map(c => ({ type: 'cert', title: c.title, date: c.date }))
                ];
                
                feed.innerHTML = recent.length ? recent.map(item => `
                    <div class="flex items-center gap-3 text-sm">
                        <div class="w-8 h-8 rounded-full ${item.type === 'project' ? 'bg-blue-100 text-blue-600' : 'bg-amber-100 text-amber-600'} flex items-center justify-center">
                            <i class="fas fa-${item.type === 'project' ? 'briefcase' : 'certificate'}"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-medium text-slate-900 dark:text-white">${item.type === 'project' ? 'Added project' : 'Added certificate'}</p>
                            <p class="text-slate-500 text-xs">${item.title}</p>
                        </div>
                        <span class="text-xs text-slate-400">${item.date}</span>
                    </div>
                `).join('') : '<p class="text-slate-500 text-sm">No recent activity</p>';
            },
            
            loadProjects() {
                const tbody = document.getElementById('admin-projects-table');
                tbody.innerHTML = store.data.projects.map(p => `
                    <tr class="hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors">
                        <td class="px-6 py-4">
                            <div class="flex items-center gap-3">
                                <img src="${p.image}" class="w-10 h-10 rounded object-cover bg-slate-200">
                                <div>
                                    <div class="font-medium text-slate-900 dark:text-white">${p.title}</div>
                                    <div class="text-xs text-slate-500">${p.category || 'Web App'}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-slate-500 dark:text-slate-400 text-xs">${p.category || 'Web App'}</td>
                        <td class="px-6 py-4">
                            <span class="px-2 py-1 rounded-full text-xs font-medium ${p.status === 'Live' ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400' : p.status === 'In Progress' ? 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400' : 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400'}">
                                ${p.status}
                            </span>
                        </td>
                        <td class="px-6 py-4 text-slate-500 dark:text-slate-400 text-xs">${p.date}</td>
                        <td class="px-6 py-4 text-right">
                            <button onclick="adminRouter.editProject(${p.id})" class="text-blue-600 hover:text-blue-800 dark:text-blue-400 mr-3"><i class="fas fa-edit"></i></button>
                            <button onclick="adminRouter.confirmDelete('project', ${p.id})" class="text-red-600 hover:text-red-800 dark:text-red-400"><i class="fas fa-trash"></i></button>
                        </td>
                    </tr>
                `).join('');
            },
            
            loadCertificates() {
                const container = document.getElementById('admin-certs-grid');
                container.innerHTML = store.data.certificates.map(c => `
                    <div class="bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative group">
                        <div class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-2">
                            <button onclick="adminRouter.editCert('${c.id}')" class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700"><i class="fas fa-edit text-xs"></i></button>
                            <button onclick="adminRouter.confirmDelete('certificate', '${c.id}')" class="w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center hover:bg-red-700"><i class="fas fa-trash text-xs"></i></button>
                        </div>
                        <div class="text-4xl mb-3">${c.icon}</div>
                        <h4 class="font-bold text-slate-900 dark:text-white mb-1">${c.title}</h4>
                        <p class="text-sm text-slate-500 mb-2">${c.issuer}</p>
                        <span class="text-xs bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 px-2 py-1 rounded">${c.date}</span>
                    </div>
                `).join('');
            },
            
            loadEvents() {
                const container = document.getElementById('admin-events-list');
                container.innerHTML = store.data.events.map(e => `
                    <div class="bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-between items-center">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-lg ${e.status === 'upcoming' ? 'bg-amber-100 text-amber-600' : 'bg-slate-100 text-slate-600'} flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-calendar"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-slate-900 dark:text-white">${e.title}</h4>
                                <p class="text-sm text-slate-500">${e.desc}</p>
                                <div class="flex gap-3 mt-1 text-xs text-slate-400">
                                    <span><i class="fas fa-map-marker-alt mr-1"></i>${e.location}</span>
                                    <span><i class="far fa-clock mr-1"></i>${e.date}</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="adminRouter.editEvent(${e.id})" class="p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg"><i class="fas fa-edit"></i></button>
                            <button onclick="adminRouter.confirmDelete('event', ${e.id})" class="p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                `).join('');
            },
            
            loadCVEditor() {
                const p = store.data.personal;
                const s = store.data.stats;
                document.getElementById('edit-name').value = p.name;
                document.getElementById('edit-title').value = p.title;
                document.getElementById('edit-email').value = p.email;
                document.getElementById('edit-phone').value = p.phone[0];
                document.getElementById('edit-location').value = p.location;
                document.getElementById('edit-photo').value = p.photo || '';
                document.getElementById('edit-aboutPhoto').value = p.aboutPhoto || '';
                document.getElementById('edit-about').value = p.about;
                document.getElementById('edit-stat-projects').value = s.projects;
                document.getElementById('edit-stat-experience').value = s.experience;
                document.getElementById('edit-stat-clients').value = s.clients;
            },
            
            loadMessages() {
                const container = document.getElementById('admin-messages-list');
                document.getElementById('msg-badge').innerText = store.data.messages.length;
                
                if(store.data.messages.length === 0) {
                    container.innerHTML = '<div class="p-8 text-center text-slate-500">No messages yet</div>';
                    return;
                }
                
                container.innerHTML = store.data.messages.map((m, i) => `
                    <div class="p-6 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold">
                                    ${m.name.charAt(0)}
                                </div>
                                <div>
                                    <h4 class="font-bold text-slate-900 dark:text-white">${m.name}</h4>
                                    <p class="text-sm text-slate-500">${m.email}</p>
                                </div>
                            </div>
                            <span class="text-xs text-slate-400">${m.date}</span>
                        </div>
                        <h5 class="font-semibold text-slate-800 dark:text-slate-200 mb-1">${m.subject}</h5>
                        <p class="text-slate-600 dark:text-slate-400 text-sm mb-3">${m.body}</p>
                        <button onclick="cmsManager.deleteMessage(${i})" class="text-xs text-red-600 hover:text-red-800">Delete</button>
                    </div>
                `).join('');
            },
            
            openProjectModal(id = null) {
                document.getElementById('modal-project').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('modal-project-content').classList.remove('scale-95', 'opacity-0');
                    document.getElementById('modal-project-content').classList.add('scale-100', 'opacity-100');
                }, 10);
                
                if(id) {
                    const p = store.data.projects.find(x => x.id === id);
                    document.getElementById('project-modal-title').innerText = 'Edit Project';
                    document.getElementById('project-id').value = p.id;
                    document.getElementById('project-title').value = p.title;
                    document.getElementById('project-category').value = p.category || 'Web App';
                    document.getElementById('project-status').value = p.status;
                    document.getElementById('project-short').value = p.shortDesc;
                    document.getElementById('project-full').value = p.fullDesc;
                    document.getElementById('project-image').value = p.image;
                    document.getElementById('project-tags').value = p.tags.join(', ');
                    document.getElementById('project-demo').value = p.demoUrl || '';
                    document.getElementById('project-repo').value = p.repoUrl || '';
                    document.getElementById('project-features').value = p.features.join('\n');
                    document.getElementById('project-date').value = p.date;
                    document.getElementById('project-client').value = p.client;
                } else {
                    document.getElementById('project-modal-title').innerText = 'Add New Project';
                    document.getElementById('project-id').value = '';
                    document.querySelector('#modal-project form').reset();
                }
            },
            
            openCertModal(id = null) {
                document.getElementById('modal-certificate').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('modal-cert-content').classList.remove('scale-95', 'opacity-0');
                    document.getElementById('modal-cert-content').classList.add('scale-100', 'opacity-100');
                }, 10);
                
                if(id) {
                    const c = store.data.certificates.find(x => x.id === id);
                    document.getElementById('cert-modal-title').innerText = 'Edit Certificate';
                    document.getElementById('cert-id').value = c.id;
                    document.getElementById('cert-title').value = c.title;
                    document.getElementById('cert-issuer').value = c.issuer;
                    document.getElementById('cert-type').value = c.type;
                    document.getElementById('cert-date').value = c.date;
                    document.getElementById('cert-desc').value = c.desc;
                    document.getElementById('cert-icon').value = c.icon;
                } else {
                    document.getElementById('cert-modal-title').innerText = 'Add Certificate';
                    document.getElementById('cert-id').value = '';
                    document.querySelector('#modal-certificate form').reset();
                }
            },
            
            openEventModal(id = null) {
                document.getElementById('modal-event').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('modal-event-content').classList.remove('scale-95', 'opacity-0');
                    document.getElementById('modal-event-content').classList.add('scale-100', 'opacity-100');
                }, 10);
                
                if(id) {
                    const e = store.data.events.find(x => x.id === id);
                    document.getElementById('event-modal-title').innerText = 'Edit Event';
                    document.getElementById('event-id').value = e.id;
                    document.getElementById('event-title').value = e.title;
                    document.getElementById('event-desc').value = e.desc;
                    document.getElementById('event-date').value = e.date;
                    document.getElementById('event-location').value = e.location;
                    document.getElementById('event-status').value = e.status;
                } else {
                    document.getElementById('event-modal-title').innerText = 'Add Event';
                    document.getElementById('event-id').value = '';
                    document.querySelector('#modal-event form').reset();
                }
            },
            
            editProject(id) { this.openProjectModal(id); },
            editCert(id) { this.openCertModal(id); },
            editEvent(id) { this.openEventModal(id); },
            
            confirmDelete(type, id) {
                this.deleteCallback = { type, id };
                document.getElementById('modal-delete').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('modal-delete-content').classList.remove('scale-95', 'opacity-0');
                    document.getElementById('modal-delete-content').classList.add('scale-100', 'opacity-100');
                }, 10);
            },
            
            closeModals() {
                ['modal-project', 'modal-certificate', 'modal-event', 'modal-delete'].forEach(id => {
                    const modal = document.getElementById(id);
                    const content = modal.querySelector('div[class*="transform"]');
                    if(content) {
                        content.classList.remove('scale-100', 'opacity-100');
                        content.classList.add('scale-95', 'opacity-0');
                    }
                    setTimeout(() => modal.classList.add('hidden'), 200);
                });
            }
        };

        // ================= CMS MANAGER =================
        const cmsManager = {
            saveProject(e) {
                e.preventDefault();
                const id = document.getElementById('project-id').value;
                const project = {
                    id: id ? parseInt(id) : Date.now(),
                    title: document.getElementById('project-title').value,
                    category: document.getElementById('project-category').value,
                    status: document.getElementById('project-status').value,
                    shortDesc: document.getElementById('project-short').value,
                    fullDesc: document.getElementById('project-full').value,
                    image: document.getElementById('project-image').value || 'https://via.placeholder.com/800x500',
                    tags: document.getElementById('project-tags').value.split(',').map(t => t.trim()).filter(t => t),
                    demoUrl: document.getElementById('project-demo').value,
                    repoUrl: document.getElementById('project-repo').value,
                    features: document.getElementById('project-features').value.split('\n').map(f => f.trim()).filter(f => f),
                    date: document.getElementById('project-date').value,
                    client: document.getElementById('project-client').value
                };
                
                if(id) {
                    const idx = store.data.projects.findIndex(p => p.id === parseInt(id));
                    store.data.projects[idx] = project;
                } else {
                    store.data.projects.push(project);
                }
                
                store.save();
                adminRouter.closeModals();
                adminRouter.loadProjects();
                ui.showToast('Project saved successfully');
            },
            
            saveCertificate(e) {
                e.preventDefault();
                const id = document.getElementById('cert-id').value;
                const cert = {
                    id: id || 'cert-' + Date.now(),
                    title: document.getElementById('cert-title').value,
                    issuer: document.getElementById('cert-issuer').value,
                    type: document.getElementById('cert-type').value,
                    date: document.getElementById('cert-date').value,
                    desc: document.getElementById('cert-desc').value,
                    icon: document.getElementById('cert-icon').value || 'ðŸ†'
                };
                
                if(id) {
                    const idx = store.data.certificates.findIndex(c => c.id === id);
                    store.data.certificates[idx] = cert;
                } else {
                    store.data.certificates.push(cert);
                }
                
                store.save();
                adminRouter.closeModals();
                adminRouter.loadCertificates();
                ui.showToast('Certificate saved successfully');
            },
            
            saveEvent(e) {
                e.preventDefault();
                const id = document.getElementById('event-id').value;
                const event = {
                    id: id ? parseInt(id) : Date.now(),
                    title: document.getElementById('event-title').value,
                    desc: document.getElementById('event-desc').value,
                    date: document.getElementById('event-date').value,
                    location: document.getElementById('event-location').value,
                    status: document.getElementById('event-status').value
                };
                
                if(id) {
                    const idx = store.data.events.findIndex(ev => ev.id === parseInt(id));
                    store.data.events[idx] = event;
                } else {
                    store.data.events.push(event);
                }
                
                store.save();
                adminRouter.closeModals();
                adminRouter.loadEvents();
                ui.showToast('Event saved successfully');
            },
            
            saveProfile(e) {
                e.preventDefault();
                const form = e.target;
                store.data.personal.name = form.name.value;
                store.data.personal.title = form.title.value;
                store.data.personal.email = form.email.value;
                store.data.personal.phone = [form.phone.value];
                store.data.personal.location = form.location.value;
                store.data.personal.photo = form.photo.value;
                store.data.personal.aboutPhoto = form.aboutPhoto.value;
                store.data.personal.about = form.about.value;
                store.data.stats.projects = parseInt(form.projects.value);
                store.data.stats.experience = parseInt(form.experience.value);
                store.data.stats.clients = parseInt(form.clients.value);
                
                store.save();
                ui.showToast('Profile updated successfully');
                renderer.updateStaticContent();
            },
            
            confirmDelete() {
                if(!adminRouter.deleteCallback) return;
                const { type, id } = adminRouter.deleteCallback;
                
                if(type === 'project') {
                    store.data.projects = store.data.projects.filter(p => p.id !== id);
                } else if(type === 'certificate') {
                    store.data.certificates = store.data.certificates.filter(c => c.id !== id);
                } else if(type === 'event') {
                    store.data.events = store.data.events.filter(e => e.id !== id);
                }
                
                store.save();
                adminRouter.closeModals();
                if(type === 'project') adminRouter.loadProjects();
                if(type === 'certificate') adminRouter.loadCertificates();
                if(type === 'event') adminRouter.loadEvents();
                ui.showToast('Item deleted successfully');
                adminRouter.deleteCallback = null;
            },
            
            deleteMessage(index) {
                store.data.messages.splice(index, 1);
                store.save();
                adminRouter.loadMessages();
                ui.showToast('Message deleted');
            },
            
            handleImageSelect(e, targetId) {
                const file = e.target.files[0];
                if(file) this.readImage(file, targetId);
            },
            
            handleImageDrop(e, targetId) {
                e.preventDefault();
                e.currentTarget.classList.remove('dragover');
                const file = e.dataTransfer.files[0];
                if(file && file.type.startsWith('image/')) {
                    this.readImage(file, targetId);
                }
            },
            
            handleDragOver(e) {
                e.preventDefault();
                e.currentTarget.classList.add('dragover');
            },
            
            handleDragLeave(e) {
                e.currentTarget.classList.remove('dragover');
            },
            
            readImage(file, targetId) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById(targetId).value = e.target.result;
                    ui.showToast('Image loaded successfully');
                };
                reader.readAsDataURL(file);
            },
            
            exportData() {
                const data = store.export();
                const blob = new Blob([data], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `portfolio-backup-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                ui.showToast('Data exported successfully');
            },
            
            importData(input) {
                const file = input.files[0];
                if(!file) return;
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    if(store.import(e.target.result)) {
                        ui.showToast('Data imported successfully! Refreshing...');
                        setTimeout(() => location.reload(), 1500);
                    } else {
                        ui.showToast('Invalid data file');
                    }
                };
                reader.readAsText(file);
            },
            
            resetData() {
                if(confirm('Are you sure? This will reset all data to default.')) {
                    store.reset();
                    ui.showToast('Data reset successfully! Refreshing...');
                    setTimeout(() => location.reload(), 1500);
                }
            }
        };

        // ================= RENDERERS =================
        const renderer = {
            updateStaticContent() {
                const p = store.data.personal;
                document.getElementById('hero-name').innerText = p.name;
                document.getElementById('hero-title').innerText = p.title;
                document.getElementById('hero-image').src = p.photo;
                document.getElementById('footer-name').innerText = p.name;
                document.title = `${p.name} | Portfolio`;
            },
            
            renderAbout() {
                const p = store.data.personal;
                document.getElementById('about-content').innerHTML = p.about.split('\n\n').map(par => `<p>${par}</p>`).join('');
                document.getElementById('about-image').src = p.aboutPhoto;
                
                const container = document.getElementById('skills-container');
                container.innerHTML = store.data.skills.map(skill => `
                    <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all hover:-translate-y-1 cursor-pointer group">
                        <div class="flex items-center gap-3 mb-3">
                            <span class="text-2xl group-hover:scale-110 transition-transform">${skill.icon}</span>
                            <h4 class="font-bold text-lg">${skill.title}</h4>
                        </div>
                        <p class="text-slate-600 dark:text-slate-400 text-sm">${skill.desc}</p>
                    </div>
                `).join('');
            },
            
            renderProjects() {
                const container = document.getElementById('projects-container');
                container.innerHTML = store.data.projects.map(project => `
                    <article class="bg-white dark:bg-slate-800 rounded-xl overflow-hidden shadow-lg border border-slate-200 dark:border-slate-700 hover:shadow-xl transition-all hover:-translate-y-2 group">
                        <div class="relative overflow-hidden h-48">
                            <img src="${project.image}" alt="${project.title}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-4">
                                <span class="text-white text-sm font-medium">View Details &rarr;</span>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="flex flex-wrap gap-2 mb-3">
                                ${project.tags.slice(0,3).map(tag => `<span class="px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs rounded-md font-medium">${tag}</span>`).join('')}
                            </div>
                            <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">${project.title}</h3>
                            <p class="text-slate-600 dark:text-slate-400 text-sm mb-4 line-clamp-2">${project.shortDesc}</p>
                            <button onclick="router.navigate('project-detail'); renderer.renderProjectDetail(${project.id})" class="w-full py-2 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-sm font-medium">
                                View Project
                            </button>
                        </div>
                    </article>
                `).join('');
            },
            
            renderProjectDetail(id) {
                const project = store.data.projects.find(p => p.id === id);
                if(!project) return;
                
                const container = document.getElementById('project-detail-content');
                container.innerHTML = `
                    <div class="h-64 md:h-96 overflow-hidden">
                        <img src="${project.image}" class="w-full h-full object-cover">
                    </div>
                    <div class="p-8">
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${project.tags.map(tag => `<span class="px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm rounded-full font-medium">${tag}</span>`).join('')}
                        </div>
                        <h1 class="text-3xl font-bold mb-4 text-slate-900 dark:text-white">${project.title}</h1>
                        <div class="grid grid-cols-2 gap-4 mb-8 text-sm text-slate-500 dark:text-slate-400">
                            <div><i class="far fa-calendar mr-2"></i> ${project.date}</div>
                            <div><i class="far fa-building mr-2"></i> ${project.client}</div>
                        </div>
                        <p class="text-lg text-slate-700 dark:text-slate-300 mb-6 leading-relaxed">${project.fullDesc}</p>
                        
                        <h3 class="font-bold text-xl mb-4 text-slate-900 dark:text-white">Key Features</h3>
                        <ul class="space-y-2 mb-8">
                            ${project.features.map(f => `<li class="flex items-start gap-3 text-slate-600 dark:text-slate-400"><i class="fas fa-check-circle text-green-500 mt-1"></i> ${f}</li>`).join('')}
                        </ul>
                        
                        <div class="flex flex-col sm:flex-row gap-4">
                            ${project.demoUrl ? `<a href="${project.demoUrl}" target="_blank" class="w-full sm:w-auto px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-lg hover:shadow-blue-500/30 text-center flex items-center justify-center gap-2">
                                <i class="fas fa-external-link-alt"></i> Live Demo
                            </a>` : ''}
                            ${project.repoUrl ? `<a href="${project.repoUrl}" target="_blank" class="w-full sm:w-auto px-6 py-3 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-center flex items-center justify-center gap-2">
                                <i class="fab fa-github"></i> View Code
                            </a>` : ''}
                        </div>
                    </div>
                `;
            },
            
            renderCertificates() {
                const container = document.getElementById('certificates-container');
                container.innerHTML = store.data.certificates.map(cert => `
                    <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border-l-4 ${cert.type === 'aws' ? 'border-amber-500' : cert.type === 'google' ? 'border-blue-500' : 'border-blue-600'} hover:-translate-y-1 transition-transform">
                        <div class="text-4xl mb-4">${cert.icon}</div>
                        <h3 class="text-xl font-bold mb-1 text-slate-900 dark:text-white">${cert.title}</h3>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mb-3">${cert.issuer}</p>
                        <p class="text-xs font-semibold text-amber-600 dark:text-amber-400 mb-4">${cert.date}</p>
                        <p class="text-sm text-slate-600 dark:text-slate-400 mb-6">${cert.desc}</p>
                        <div class="flex gap-3">
                            <button onclick="certViewer.open('${cert.type}', '${cert.id}')" class="flex-1 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors">
                                View
                            </button>
                        </div>
                    </div>
                `).join('');
            },
            
            renderCV() {
                const container = document.getElementById('cv-document');
                const p = store.data.personal;
                const s = store.data.stats;
                
                container.innerHTML = `
                    <div class="border-b-2 border-blue-600 pb-6 mb-6">
                        <h1 class="text-4xl font-bold uppercase tracking-wider mb-2 font-display">${p.name}</h1>
                        <p class="text-xl text-slate-600 dark:text-slate-300 mb-4">${p.title}</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-y-2 gap-x-8 text-sm text-slate-500 dark:text-slate-400">
                            <span><i class="fas fa-map-marker-alt mr-2 text-blue-500"></i> ${p.location}</span>
                            <span><i class="fas fa-envelope mr-2 text-blue-500"></i> ${p.email}</span>
                            <span><i class="fas fa-phone mr-2 text-blue-500"></i> ${p.phone.join(' / ')}</span>
                            <span><i class="fas fa-birthday-cake mr-2 text-blue-500"></i> ${p.dob}</span>
                            <span><i class="fas fa-venus-mars mr-2 text-blue-500"></i> ${p.gender} | ${p.maritalStatus}</span>
                            <span><i class="fas fa-language mr-2 text-blue-500"></i> ${p.languages}</span>
                        </div>
                    </div>

                    <div class="mb-8">
                        <h2 class="text-lg font-bold text-blue-600 mb-3 uppercase tracking-wide border-b border-slate-200 dark:border-slate-700 pb-1 flex items-center gap-2">
                            <i class="fas fa-bullseye text-sm"></i> Career Objectives
                        </h2>
                        <p class="text-slate-700 dark:text-slate-300 leading-relaxed text-sm">
                            ${p.about.replace(/\n\n/g, '<br><br>')}
                        </p>
                    </div>

                    <div class="mb-8">
                        <h2 class="text-lg font-bold text-blue-600 mb-3 uppercase tracking-wide border-b border-slate-200 dark:border-slate-700 pb-1 flex items-center gap-2">
                            <i class="fas fa-graduation-cap text-sm"></i> Educational Background
                        </h2>
                        <div class="space-y-3">
                            ${store.data.education.map(edu => `
                                <div class="flex justify-between">
                                    <span class="font-semibold text-slate-800 dark:text-slate-200">${edu.school}</span>
                                    <span class="text-blue-600 dark:text-blue-400 font-bold">${edu.qualification}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="mb-8">
                        <h2 class="text-lg font-bold text-blue-600 mb-4 uppercase tracking-wide border-b border-slate-200 dark:border-slate-700 pb-1 flex items-center gap-2">
                            <i class="fas fa-history text-sm"></i> Work History
                        </h2>
                        <div class="space-y-8">
                            ${store.data.workHistory.map(work => `
                                <div>
                                    <div class="flex flex-col md:flex-row md:justify-between md:items-baseline mb-1">
                                        <h3 class="font-bold text-slate-900 dark:text-white text-lg">${work.role} | <span class="text-blue-600 dark:text-blue-400">${work.company}</span></h3>
                                        <span class="text-xs font-semibold bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-2 py-1 rounded mt-1 md:mt-0 w-fit">${work.period}</span>
                                    </div>
                                    <p class="text-sm text-slate-500 dark:text-slate-400 mb-3 italic">${work.overview}</p>
                                    <h4 class="text-xs font-bold uppercase text-slate-400 mb-2 tracking-widest">Key Duties & Responsibilities:</h4>
                                    <ul class="list-disc list-outside ml-4 text-sm text-slate-600 dark:text-slate-300 space-y-2">
                                        ${work.responsibilities.map(resp => {
                                            const parts = resp.split(':');
                                            if (parts.length > 1) {
                                                return `<li><span class="font-bold text-slate-800 dark:text-slate-100">${parts[0]}:</span>${parts.slice(1).join(':')}</li>`;
                                            }
                                            return `<li>${resp}</li>`;
                                        }).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="mb-8">
                        <h2 class="text-lg font-bold text-blue-600 mb-4 uppercase tracking-wide border-b border-slate-200 dark:border-slate-700 pb-1 flex items-center gap-2">
                            <i class="fas fa-project-diagram text-sm"></i> Featured Projects
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            ${store.data.projects.map(proj => `
                                <div class="bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700">
                                    <h4 class="font-bold text-slate-900 dark:text-white mb-1">${proj.title}</h4>
                                    <p class="text-xs text-slate-500 dark:text-slate-400 mb-2">${proj.shortDesc}</p>
                                    <ul class="text-[11px] space-y-1 text-slate-600 dark:text-slate-400">
                                        ${proj.features.slice(0, 3).map(f => `<li>â€¢ ${f}</li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="mb-4">
                        <h2 class="text-lg font-bold text-blue-600 mb-3 uppercase tracking-wide border-b border-slate-200 dark:border-slate-700 pb-1 flex items-center gap-2">
                            <i class="fas fa-tools text-sm"></i> Core Competencies
                        </h2>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs">
                            ${store.data.skills.map(skill => `
                                <div>
                                    <h4 class="font-bold text-slate-900 dark:text-white mb-1">${skill.title}</h4>
                                    <p class="text-slate-500 dark:text-slate-400">${skill.desc}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="mt-12 text-center text-slate-400 text-xs italic border-t border-slate-100 dark:border-slate-800 pt-4">
                        References available on request
                    </div>
                `;
            },
            
            renderEvents() {
                const container = document.getElementById('events-container');
                container.innerHTML = store.data.events.map((event, index) => {
                    const isEven = index % 2 === 0;
                    return `
                    <div class="relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group is-active">
                        <div class="flex items-center justify-center w-10 h-10 rounded-full border border-white dark:border-slate-800 bg-slate-200 dark:bg-slate-700 group-[.is-active]:bg-blue-600 text-slate-500 group-[.is-active]:text-white shadow shrink-0 md:order-1 md:group-odd:-translate-x-1/2 md:group-even:translate-x-1/2 z-10">
                            <i class="fas fa-calendar-alt text-sm"></i>
                        </div>
                        <div class="w-[calc(100%-4rem)] md:w-[calc(50%-2.5rem)] bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 hover:shadow-xl transition-all hover:-translate-y-1">
                            <div class="flex items-center justify-between space-x-2 mb-2">
                                <div class="font-bold text-slate-900 dark:text-white text-lg">${event.title}</div>
                                <time class="font-mono text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded whitespace-nowrap">${event.date}</time>
                            </div>
                            <div class="text-slate-600 dark:text-slate-400 text-sm mb-4">${event.desc}</div>
                            <div class="flex items-center gap-4 text-xs">
                                <span class="flex items-center gap-1 text-slate-500 dark:text-slate-500">
                                    <i class="fas fa-map-marker-alt text-red-500"></i> ${event.location}
                                </span>
                                <span class="px-2 py-0.5 rounded-full ${event.status === 'upcoming' ? 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400' : 'bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300'} font-bold uppercase tracking-wider scale-90">
                                    ${event.status}
                                </span>
                            </div>
                        </div>
                    </div>
                    `;
                }).join('');
            },
            
            renderContact() {
                const p = store.data.personal;
                document.getElementById('contact-info').innerHTML = `
                    <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg flex items-start gap-4">
                        <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400 text-xl flex-shrink-0">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">Email</h3>
                            <p class="text-slate-600 dark:text-slate-400">${p.email}</p>
                        </div>
                    </div>

                    <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg flex items-start gap-4">
                        <div class="w-12 h-12 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center text-amber-600 dark:text-amber-400 text-xl flex-shrink-0">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">Phone</h3>
                            ${p.phone.map(ph => `<p class="text-slate-600 dark:text-slate-400">${ph}</p>`).join('')}
                        </div>
                    </div>

                    <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg flex items-start gap-4">
                        <div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 text-xl flex-shrink-0">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">Location</h3>
                            <p class="text-slate-600 dark:text-slate-400">${p.location}</p>
                        </div>
                    </div>

                    <div class="rounded-xl overflow-hidden shadow-lg h-64 w-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center">
                        <p class="text-slate-500"><i class="fas fa-map mr-2"></i> Map Placeholder</p>
                    </div>
                `;
            }
        };

        // ================= UI UTILITIES =================
        const ui = {
            toggleMobileMenu() {
                document.getElementById('mobile-menu').classList.toggle('hidden');
            },
            
            toggleAdminSidebar() {
                // Mobile sidebar toggle logic would go here
                alert("Use desktop view for full admin features");
            },
            
            showToast(msg) {
                const toast = document.getElementById('toast');
                document.getElementById('toast-message').innerText = msg;
                toast.classList.remove('translate-y-20', 'opacity-0');
                setTimeout(() => {
                    toast.classList.add('translate-y-20', 'opacity-0');
                }, 3000);
            }
        };

        // ================= THEME MANAGER =================
        const themeManager = {
            init() {
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    document.documentElement.classList.add('dark');
                    this.updateIcon(true);
                } else {
                    document.documentElement.classList.remove('dark');
                    this.updateIcon(false);
                }
            },
            
            toggle() {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.theme = 'light';
                    this.updateIcon(false);
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.theme = 'dark';
                    this.updateIcon(true);
                }
            },
            
            updateIcon(isDark) {
                const icon = document.getElementById('theme-icon');
                const mobileIcon = document.getElementById('theme-icon-mobile');
                const cls = isDark ? 'fas fa-sun text-amber-400' : 'fas fa-moon text-slate-600';
                if(icon) icon.className = cls;
                if(mobileIcon) mobileIcon.className = cls;
            }
        };

        // ================= CV MANAGER =================
        const cvManager = {
            isOpen: false,
            
            toggleView() {
                const doc = document.getElementById('cv-document');
                const btnText = document.getElementById('cv-toggle-text');
                
                if(this.isOpen) {
                    doc.classList.add('hidden');
                    btnText.innerText = 'View CV';
                } else {
                    doc.classList.remove('hidden');
                    btnText.innerText = 'Hide CV';
                    doc.scrollIntoView({ behavior: 'smooth' });
                }
                this.isOpen = !this.isOpen;
            },
            
            download() {
                window.print();
            }
        };

        // ================= CERTIFICATE VIEWER =================
        const certViewer = {
            open(type, id) {
                const cert = store.data.certificates.find(c => c.id === id);
                if(!cert) return;
                
                const modal = document.getElementById('cert-modal');
                const content = document.getElementById('cert-content');
                
                let html = '';
                if(type === 'aws') {
                    html = `
                        <div class="cert-aws w-full max-w-3xl mx-auto p-12 shadow-2xl relative font-sans text-center bg-white">
                            <div class="text-6xl font-black text-amber-500 mb-4 font-display tracking-widest">AWS</div>
                            <h1 class="text-3xl font-serif text-slate-800 mb-2">Certificate of Completion</h1>
                            <p class="text-slate-500 uppercase tracking-widest text-sm mb-8">Professional Certification</p>
                            <div class="my-8">
                                <p class="text-slate-500 text-sm uppercase tracking-wider mb-2">This certifies that</p>
                                <h2 class="text-5xl font-serif font-bold text-slate-900 mb-2">${store.data.personal.name}</h2>
                                <div class="w-32 h-1 bg-amber-500 mx-auto mb-4"></div>
                                <p class="text-xl text-slate-700">${cert.title}</p>
                            </div>
                            <p class="text-slate-600 max-w-lg mx-auto mb-12">${cert.desc}</p>
                            <div class="flex justify-between items-end mt-12 pt-8 border-t border-slate-200">
                                <div class="text-left">
                                    <p class="text-xs text-slate-400 uppercase">Date</p>
                                    <p class="font-bold text-slate-800">${cert.date}</p>
                                </div>
                                <div class="text-right">
                                    <div class="h-12 w-32 bg-slate-200 mb-1"></div>
                                    <p class="text-xs text-slate-400 uppercase">Signature</p>
                                </div>
                            </div>
                            <div class="absolute bottom-8 right-8 text-6xl opacity-20">${cert.icon}</div>
                        </div>
                    `;
                } else if (type === 'google') {
                    html = `
                        <div class="cert-google w-full max-w-3xl mx-auto shadow-2xl flex overflow-hidden">
                            <div class="w-1/3 bg-gradient-to-b from-blue-500 to-green-500 p-8 text-white flex flex-col items-center justify-center">
                                <div class="text-4xl font-bold mb-4 tracking-tighter">Google</div>
                                <div class="w-24 h-24 bg-white rounded-full flex items-center justify-center text-4xl shadow-lg mb-4">${cert.icon}</div>
                                <p class="text-center text-sm opacity-90">Career Certificate</p>
                            </div>
                            <div class="w-2/3 p-12 flex flex-col justify-center bg-white">
                                <h1 class="text-3xl font-serif text-slate-800 mb-1">Certificate of Completion</h1>
                                <p class="text-slate-500 mb-8">${cert.title}</p>
                                <p class="text-xs text-slate-400 uppercase tracking-widest mb-1">Presented to</p>
                                <h2 class="text-4xl font-serif text-slate-900 mb-6">${store.data.personal.name}</h2>
                                <div class="border-t border-slate-200 pt-6 mt-auto">
                                    <div class="flex justify-between text-sm">
                                        <div>
                                            <p class="text-slate-400 text-xs uppercase">Date</p>
                                            <p class="font-semibold text-slate-700">${cert.date}</p>
                                        </div>
                                        <div class="text-right">
                                            <p class="text-slate-400 text-xs uppercase">Issuer</p>
                                            <p class="font-semibold text-slate-700">${cert.issuer}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    html = `
                        <div class="cert-meta w-full max-w-3xl mx-auto p-12 shadow-2xl relative font-sans bg-white">
                            <div class="flex justify-between items-start mb-12">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-[#0081fb] rounded-lg flex items-center justify-center text-white font-bold text-xl">M</div>
                                    <span class="text-2xl font-bold text-[#0081fb]">${cert.issuer}</span>
                                </div>
                                <div class="text-right">
                                    <p class="text-xs text-slate-400 uppercase tracking-widest">Professional Certificate</p>
                                    <p class="font-bold text-slate-800">Career Program</p>
                                </div>
                            </div>
                            <div class="mb-8">
                                <p class="text-xs text-slate-400 uppercase tracking-widest mb-2 flex items-center gap-2">
                                    <span class="w-8 h-0.5 bg-[#0081fb]"></span> Certificate of Completion
                                </p>
                                <h1 class="text-4xl font-bold text-slate-900 leading-tight">${cert.title}</h1>
                            </div>
                            <div class="bg-slate-100 p-6 rounded-lg border-l-4 border-[#0081fb] mb-8">
                                <p class="text-xs text-slate-500 uppercase tracking-widest mb-1">Awarded to</p>
                                <h2 class="text-3xl font-bold text-slate-900">${store.data.personal.name}</h2>
                            </div>
                            <div class="flex gap-8 text-sm border-t border-slate-200 pt-6">
                                <div>
                                    <p class="text-xs text-slate-400 uppercase">Issue Date</p>
                                    <p class="font-bold text-slate-800">${cert.date}</p>
                                </div>
                                <div>
                                    <p class="text-xs text-slate-400 uppercase">Description</p>
                                    <p class="font-bold text-slate-800">${cert.desc}</p>
                                </div>
                            </div>
                            <div class="absolute bottom-12 right-12 w-20 h-20 rounded-full border-4 border-[#0081fb] flex items-center justify-center text-3xl text-[#0081fb]">
                                ${cert.icon}
                            </div>
                        </div>
                    `;
                }
                
                content.innerHTML = html;
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.remove('opacity-0');
                    content.classList.remove('scale-95');
                    content.classList.add('scale-100');
                }, 10);
            },
            
            close() {
                const modal = document.getElementById('cert-modal');
                const content = document.getElementById('cert-content');
                
                modal.classList.add('opacity-0');
                content.classList.remove('scale-100');
                content.classList.add('scale-95');
                
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }
        };

        // ================= FORM HANDLER =================
        const formHandler = {
            handleSubmit(e) {
                e.preventDefault();
                const formData = new FormData(e.target);
                const message = {
                    name: e.target.querySelector('input[type="text"]').value,
                    email: e.target.querySelector('input[type="email"]').value,
                    subject: "Contact Form",
                    body: e.target.querySelector('textarea').value,
                    date: new Date().toLocaleString(),
                    read: false
                };
                
                store.data.messages.unshift(message);
                store.save();
                ui.showToast("Message sent successfully! I'll get back to you soon.");
                e.target.reset();
                
                // Update badge if in admin
                const badge = document.getElementById('msg-badge');
                if(badge) badge.innerText = store.data.messages.length;
            }
        };

        // ================= INITIALIZATION =================
        document.addEventListener('DOMContentLoaded', () => {
            authManager.init();
            store.init();
            themeManager.init();
            document.getElementById('year').innerText = new Date().getFullYear();
            
            renderer.updateStaticContent();
            renderer.renderAbout();
            renderer.renderProjects();
            renderer.renderCertificates();
            renderer.renderContact();
            
            if(document.getElementById('page-home').classList.contains('active')) {
                setTimeout(() => router.animateCounters(), 500);
            }

            // Close login modal when clicking outside
            document.getElementById('login-modal').addEventListener('click', (e) => {
                if (e.target === e.currentTarget) {
                    authManager.closeLoginModal();
                }
            });

            // Close login modal on ESC key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    authManager.closeLoginModal();
                }
            });
        });

        // Global keyboard shortcut for Admin Login (Ctrl + Alt + L)
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.altKey && (e.key === 'l' || e.key === 'L')) {
                e.preventDefault();
                authManager.showLoginModal();
            }
        });

    </script>
</body>
</html>